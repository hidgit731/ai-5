# Сервис хранения прогресса студента

---

## Локальная разработка

### Установка зависимостей
Прошу двигаться по шагам. Тогда не будет проблем с запуском. Первый `make build` может идти около 5 минут

0. Для сокращения команд ниже я использую утилиту `make`. Попробуйте, выполняются ли команды ниже. Если нет, прошу 
нагуглить, как установить `make` в вашу систему, либо см. `Makefile` в корне проекта. Там всё расписано, но легче через make.

1. Собираем образы
```bash
make build
```

2. Установка зависимостей
```shell
make composer_install
```

3. Запуск сервиса. В данном задании не важен фронт, но после выполнения команды ниже можно проверить работу сайта, 
перейдя на http://localhost:7777. MCP-сервер в приложении, поэтому можно к нему подключаться следующим шагом.
```shell
make up
```

4. Добавляем MCP сервер в ваш агент:
    1. **Важно!!!** В агрументах (`"args"`) ниже указан абсолютный путь до директории с данным проектом (в примере
    `/home/USER/Code/otus/5_mcp/`). Нужно будет подставить ваш path до проекта от корня файловой системы.
    Не удалось это автоматизировать. Агент не учитывает, что он запущен в директории с проектом. Ему подавай абсолютный 
    путь до файла `docker-compose.yaml`. Либо я чего-то не понял.
        + **Cursor IDE**
        ```
        "hw5_mcp_server": {
          "command": "docker",
          "args": [
            "compose",
            "-f",
            "/home/USER/Code/otus/5_mcp/docker-compose.yaml",
            "exec",
            "php-fpm",
            "php",
            "bin/console",
            "dev:mcp-server"
          ]
        }
        ```
        + **Claude Code CLI**
        ```
        claude mcp add-json hw5_mcp_server '{"type":"stdio","command":"docker","args":["compose", "-f", "/home/USER/Code/otus/5_mcp/docker-compose.yaml", "exec", "php-fpm", "php", "bin/console", "dev:mcp-server"]}'
        ```

5. Если вдруг захочется подключиться к БД, вот креды:
```
Host: localhost
Port: 15432
Login: postgres
Password: postgres
DB_name: srv_student_progress
```

6. Остановка сервиса
```shell
make down
```
